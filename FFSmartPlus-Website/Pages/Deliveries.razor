@page "/Deliveries"
@using MatBlazor
<link href="_content/MatBlazor/dist/matBlazor.css" rel="stylesheet" />
<h1>orders
</h1>

@if (currentUserRole == null){
    <p> Please log in to view this page. </p>
}else if (currentUserRole.Contains("Delivery")){
    <p>Please provide supplier id as stated in your email</p>
    <p>
        <MatTextField @bind-Value="@inputSupplierId" Label="Order Id"></MatTextField>
    </p>

    <p>
        <MatDatePicker TValue="DateTime" AllowInput="true" EnableTime="true" Label="Order Date" @bind-Value="@inputOrderDate"> </MatDatePicker>
    </p>

    <MatButton @onclick="() => getDeliveriesOnDate(inputSupplierId,inputOrderDate)"> Get Orders</MatButton>

    @if (deliveriesOnDate != null)
    {
        @foreach (var x in deliveriesOnDate.Orders)
        {
            <p @bind="@currentOrderId">id: @x.Id </p>
            <p>name: @x.Name</p>
            <p @bind="@currentOrderQuant">quanitity ordered: @x.QuantityOrdered</p>
            <p>unit: @x.UnitDescription</p>
            <p>
                <MatDatePicker TValue="DateTime" AllowInput="true" EnableTime="true" Label="Select Expiry Date" @bind-Value="@inputExpDate"> </MatDatePicker>
            </p>
            <MatButton @onclick="() => ConfirmCurrentDelivery(currentOrderId, currentOrderQuant, inputExpDate)">Order Is Correct</MatButton>
        }
    }
}else{
    <p> You do not have authorisation to view this page.</p>
}
